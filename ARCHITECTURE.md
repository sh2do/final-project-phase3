# Architecture & Workflow Diagrams

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ANIME COLLECTION TRACKER                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FRONTEND (React + Vite)      â”‚    â”‚   BACKEND (FastAPI + SQLAlchemy) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚    â”‚                              â”‚
â”‚  Pages:                          â”‚    â”‚  API Routes:                 â”‚
â”‚  â”œâ”€ HomePage                    â”‚    â”‚  â”œâ”€ GET /anime               â”‚
â”‚  â”œâ”€ AnimeDetailsPage            â”‚    â”‚  â”œâ”€ POST /anime              â”‚
â”‚  â”œâ”€ MyCollectionPage            â”‚    â”‚  â”œâ”€ PATCH /anime/{id}        â”‚
â”‚  â””â”€ AddToCollectionPage         â”‚    â”‚  â”œâ”€ DELETE /anime/{id}       â”‚
â”‚                                  â”‚    â”‚  â”œâ”€ GET /users              â”‚
â”‚  Components:                     â”‚    â”‚  â”œâ”€ POST /users             â”‚
â”‚  â”œâ”€ AnimeCard                   â”‚â—„â”€â”€â–ºâ”‚  â”œâ”€ GET /collection/{uid}    â”‚
â”‚  â”œâ”€ CollectionItemCard          â”‚    â”‚  â”œâ”€ POST /collection        â”‚
â”‚  â””â”€ App (Router)                â”‚    â”‚  â”œâ”€ PATCH /collection/{id}   â”‚
â”‚                                  â”‚    â”‚  â””â”€ DELETE /collection/{id}  â”‚
â”‚  Hooks:                          â”‚    â”‚                              â”‚
â”‚  â”œâ”€ useAnime                    â”‚    â”‚  Database Layer:             â”‚
â”‚  â”œâ”€ useCollection               â”‚    â”‚  â”œâ”€ Models (3):              â”‚
â”‚  â””â”€ custom axios client          â”‚    â”‚  â”‚  â”œâ”€ Anime                â”‚
â”‚                                  â”‚    â”‚  â”‚  â”œâ”€ User                 â”‚
â”‚  Tech: React, Vite, Tailwind    â”‚    â”‚  â”‚  â””â”€ CollectionItem       â”‚
â”‚                                  â”‚    â”‚  â”œâ”€ CRUD Operations         â”‚
â”‚                                  â”‚    â”‚  â”œâ”€ Validation (Pydantic)  â”‚
â”‚                                  â”‚    â”‚  â””â”€ ORM (SQLAlchemy)        â”‚
â”‚                                  â”‚    â”‚                              â”‚
â”‚  http://localhost:5173           â”‚    â”‚  http://localhost:8000       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                      â”‚
              â”‚        Axios HTTP Requests          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DATABASE (SQLite / PostgreSQL)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  Table: anime              Table: users         Table: collectionsâ”‚
â”‚  â”œâ”€ id (PK)               â”œâ”€ id (PK)           â”œâ”€ id (PK)        â”‚
â”‚  â”œâ”€ title                 â”œâ”€ username (UNQ)    â”œâ”€ user_id (FK)   â”‚
â”‚  â”œâ”€ description           â”œâ”€ email (UNQ)       â”œâ”€ anime_id (FK)  â”‚
â”‚  â”œâ”€ image_url             â”œâ”€ created_at        â”œâ”€ episodes_watched
â”‚  â”œâ”€ episodes              â””â”€ updated_at        â”œâ”€ rating         â”‚
â”‚  â”œâ”€ release_year                               â”œâ”€ notes          â”‚
â”‚  â”œâ”€ created_at                                 â”œâ”€ is_favorite    â”‚
â”‚  â””â”€ updated_at                                 â””â”€ timestamps     â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

```
USER INTERACTION
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click "Add Anime"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AnimeCard Component (Frontend)          â”‚
â”‚  - Calls: addToCollection(animeId)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Service (services/api.js)           â”‚
â”‚  - Axios.post('/collection', data)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTP POST Request                       â”‚
â”‚  Content-Type: application/json          â”‚
â”‚  Body: {user_id, anime_id, ...}         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI Router (routers/collection.py)  â”‚
â”‚  @router.post('/collection')            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validation (schemas/collection_item.py)â”‚
â”‚  - Pydantic validates request data      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CRUD Operation (crud/collection_item.py)â”‚
â”‚  - create_collection_item(db, item)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database Operation                      â”‚
â”‚  - SQLAlchemy INSERT into collection_items
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return JSON Response                    â”‚
â”‚  {id, user_id, anime_id, ...}          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Updates State                  â”‚
â”‚  - useCollection hook updates collectionâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Re-renders Component              â”‚
â”‚  - Shows success message                â”‚
â”‚  - Updates collection list              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Component Hierarchy

```
App (Router setup)
â”‚
â”œâ”€ HomePage
â”‚  â”œâ”€ Anime Grid
â”‚  â”‚  â””â”€ AnimeCard (x many)
â”‚  â”‚     â””â”€ useAnime hook
â”‚  â””â”€ User ID Input
â”‚
â”œâ”€ AnimeDetailsPage
â”‚  â”œâ”€ Anime Info
â”‚  â”œâ”€ Add to Collection Button
â”‚  â””â”€ useSingleAnime hook
â”‚
â”œâ”€ MyCollectionPage
â”‚  â”œâ”€ Collection Items List
â”‚  â”‚  â””â”€ CollectionItemCard (x many)
â”‚  â”‚     â”œâ”€ Episode Counter
â”‚  â”‚     â”œâ”€ Rating Input
â”‚  â”‚     â”œâ”€ Notes Display
â”‚  â”‚     â””â”€ Delete Button
â”‚  â””â”€ useUserCollection hook
â”‚
â””â”€ AddToCollectionPage
   â”œâ”€ Anime Form
   â””â”€ Submit Button
```

---

## ğŸ”Œ API Endpoint Hierarchy

```
FastAPI App
â”‚
â”œâ”€ GET /                          [Health check]
â”œâ”€ GET /health                    [Status]
â”‚
â”œâ”€ Router: /anime
â”‚  â”œâ”€ GET /anime                  [List all]
â”‚  â”œâ”€ GET /anime/{id}            [Get single]
â”‚  â”œâ”€ POST /anime                [Create]
â”‚  â”œâ”€ PATCH /anime/{id}          [Update]
â”‚  â””â”€ DELETE /anime/{id}         [Delete]
â”‚
â”œâ”€ Router: /users
â”‚  â”œâ”€ GET /users                 [List all]
â”‚  â”œâ”€ GET /users/{id}           [Get single]
â”‚  â”œâ”€ POST /users               [Create]
â”‚  â”œâ”€ PATCH /users/{id}         [Update]
â”‚  â””â”€ DELETE /users/{id}        [Delete]
â”‚
â””â”€ Router: /collection
   â”œâ”€ GET /collection/{user_id}           [User's collection]
   â”œâ”€ GET /collection/item/{item_id}      [Single item]
   â”œâ”€ POST /collection                    [Add item]
   â”œâ”€ PATCH /collection/{item_id}         [Update item]
   â””â”€ DELETE /collection/{item_id}        [Remove item]
```

---

## ğŸ“ File Organization Pattern

```
Backend Pattern:
app/
â”œâ”€ models/          â†’ Database table definitions
â”œâ”€ schemas/         â†’ Request/response validation
â”œâ”€ crud/            â†’ Database queries
â”œâ”€ routers/         â†’ API endpoints
â”œâ”€ database.py      â†’ DB connection
â”œâ”€ config.py        â†’ Settings
â””â”€ main.py          â†’ App initialization

Frontend Pattern:
src/
â”œâ”€ components/      â†’ Reusable UI components
â”œâ”€ pages/           â†’ Full page components
â”œâ”€ services/        â†’ API client
â”œâ”€ hooks/           â†’ Custom React hooks
â”œâ”€ App.jsx          â†’ Router setup
â””â”€ main.jsx         â†’ Entry point
```

---

## ğŸ” Data Validation Flow

```
User Input â†’ Frontend Validation â†’ Axios Request â†’ Backend Validation
                                       â†“
                              Pydantic Schema
                                       â†“
                              âœ“ Valid? â†’ Database Operation
                              âœ— Invalid? â†’ Error Response (400)
                                       â†“
                         Database Operation Succeeds
                                       â†“
                         Return Validated Response
                                       â†“
                         Frontend Updates UI
```

---

## ğŸš€ Deployment Architecture (Optional)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DEPLOYMENT OPTIONS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOCAL DEVELOPMENT:
Frontend (npm run dev)  â†’  Backend (uvicorn)  â†’  SQLite DB
localhost:5173          localhost:8000

DOCKER (Single Machine):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend       â”‚     â”‚  Backend        â”‚
â”‚  (React)        â”‚â”€â”€â”€â”€â–ºâ”‚  (FastAPI)      â”‚
â”‚  Port: 5173     â”‚     â”‚  Port: 8000     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   SQLite DB    â”‚
                         â”‚  (anime_      â”‚
                         â”‚   tracker.db)  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRODUCTION (Separate Servers):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CDN/Frontend   â”‚      â”‚   API Server     â”‚      â”‚    Database      â”‚
â”‚   (Vercel,      â”‚â—„â”€â”€â”€â”€â–ºâ”‚   (AWS, Heroku) â”‚â—„â”€â”€â”€â”€â–ºâ”‚   (PostgreSQL)   â”‚
â”‚   Netlify)       â”‚      â”‚   (Gunicorn)     â”‚      â”‚   (RDS, etc)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š State Management (Frontend)

```
useAnime Hook
â”œâ”€ State: anime[], loading, error
â”œâ”€ Effect: Fetch on mount
â””â”€ Return: Render data or loading/error

useCollection Hook
â”œâ”€ State: collection[], loading, error
â”œâ”€ Methods:
â”‚  â”œâ”€ addToCollection(data)
â”‚  â”œâ”€ removeFromCollection(id)
â”‚  â”œâ”€ updateCollectionItem(id, data)
â”‚  â””â”€ refetch()
â””â”€ Return: All above + state

Components use hooks â†’ Re-render when state changes
```

---

## ğŸ”„ Update Flow Example

```
User changes "Episodes Watched" â†’ 12
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CollectionItemCard onChange         â”‚
â”‚ calls onUpdate(itemId, {episodes_..})
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MyCollectionPage onUpdate handler   â”‚
â”‚ calls updateCollectionItem(id, data)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Service PATCH /collection/{id}  â”‚
â”‚ Body: {episodes_watched: 12}        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend PATCH handler               â”‚
â”‚ Updates database                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return updated CollectionItem       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hook updates state with new data    â”‚
â”‚ Component re-renders with new value â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Database Relationships

```
      User (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚
        â”‚ (has many)   (belongs to)
        â”‚                  â”‚
        â–¼                  â”‚
  CollectionItem â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ (references)
        â”‚
        â–¼
      Anime (1)
      (can have many CollectionItems)

A User can track many Anime
An Anime can be tracked by many Users
CollectionItem is the junction/bridge table
```

---

This architecture is:
âœ… **Scalable** - Easy to add new features
âœ… **Maintainable** - Clear separation of concerns  
âœ… **Testable** - Each layer is independent
âœ… **Production-ready** - Professional patterns
âœ… **Documented** - Clear code structure
